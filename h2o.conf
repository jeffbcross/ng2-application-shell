# to find out the configuration commands, run: h2o --help

listen: 8080
hosts:
  "default":
    expires: 365 day
    listen:
      port: 8081
      ssl:
        certificate-file: h2o/alternate.crt
        key-file: h2o/alternate.key
    paths:
      /:
        mruby.handler: |
          lambda do |env|
            push_paths = []
            if /(\/|\.html)$/.match(env["PATH_INFO"])
              push_paths << "/angular2/bundles/angular2-polyfills.js"
              push_paths << "systemjs/dist/system.js"
              push_paths << "/app-shell.js"
              push_paths << "/app/main.js"
              push_paths << "/images/chrome-touch-icon-192x192.png"
              push_paths << "/angular2/src/platform/browser/browser_adapter.js"
              push_paths << "/angular2/platform/browser.js"
              push_paths << "/angular2/core.js"
              push_paths << "/angular2/router.js"
              push_paths << "/angular2/src/core/angular_entrypoint.js"
              push_paths << "/angular2/src/platform/browser_common.js"
              push_paths << "/angular2/src/facade/lang.js"
              push_paths << "/angular2/compiler.js"
              push_paths << "/angular2/src/core/reflection/reflection_capabilities.js"
              push_paths << "/angular2/src/platform/browser/xhr_impl.js"
              push_paths << "/angular2/src/core/di.js"
              push_paths << "/angular2/src/core/metadata.js"
              push_paths << "/angular2/src/core/util.js"
              push_paths << "/angular2/src/core/prod_mode.js"
              push_paths << "/angular2/src/facade/facade.js"
              push_paths << "/angular2/src/core/application_ref.js"
              push_paths << "/angular2/src/core/application_tokens.js"
              push_paths << "/angular2/src/core/zone.js"
              push_paths << "/angular2/src/core/render.js"
              push_paths << "/angular2/src/core/linker.js"
              push_paths << "/angular2/src/core/debug/debug_element.js"
              push_paths << "/angular2/src/core/testability/testability.js"
              push_paths << "/angular2/src/core/change_detection.js"
              push_paths << "/angular2/src/core/platform_directives_and_pipes.js"
              push_paths << "/angular2/src/core/platform_common_providers.js"
              push_paths << "/angular2/src/core/application_common_providers.js"
              push_paths << "/angular2/src/core/reflection/reflection.js"
              push_paths << "/angular2/src/router/router.js"
              push_paths << "/angular2/src/router/router_outlet.js"
              push_paths << "/angular2/src/router/router_link.js"
              push_paths << "/angular2/src/router/instruction.js"
              push_paths << "/angular2/src/router/platform_location.js"
              push_paths << "/angular2/src/router/route_registry.js"
              push_paths << "/angular2/src/router/location_strategy.js"
              push_paths << "/angular2/src/router/hash_location_strategy.js"
              push_paths << "/angular2/src/router/path_location_strategy.js"
              push_paths << "/angular2/src/router/location.js"
              push_paths << "/angular2/src/router/route_config_decorator.js"
              push_paths << "/angular2/src/router/route_definition.js"
              push_paths << "/angular2/src/router/lifecycle_annotations.js"
              push_paths << "/angular2/src/facade/exceptions.js"
              push_paths << "/angular2/common.js"
              push_paths << "/angular2/src/platform/dom/dom_adapter.js"
              push_paths << "/angular2/src/platform/dom/events/dom_events.js"
              push_paths << "/angular2/src/platform/dom/events/key_events.js"
              push_paths << "/angular2/src/platform/dom/events/hammer_gestures.js"
              push_paths << "/angular2/src/platform/dom/dom_tokens.js"
              push_paths << "/angular2/src/platform/dom/dom_renderer.js"
              push_paths << "/angular2/src/platform/dom/shared_styles_host.js"
              push_paths << "/angular2/src/animate/browser_details.js"
              push_paths << "/angular2/src/animate/animation_builder.js"
              push_paths << "/angular2/src/platform/browser/browser_adapter.js"
              push_paths << "/angular2/src/platform/browser/testability.js"
              push_paths << "/angular2/src/core/profile/wtf_init.js"
              push_paths << "/angular2/src/platform/dom/events/event_manager.js"
              push_paths << "/angular2/src/platform/browser/title.js"
              push_paths << "/angular2/platform/common_dom.js"
              push_paths << "/angular2/src/platform/browser/tools/tools.js"
              push_paths << "/angular2/src/compiler/url_resolver.js"
              push_paths << "/angular2/src/compiler/xhr.js"
              push_paths << "/angular2/src/compiler/compiler.js"
              push_paths << "/angular2/src/facade/promise.js"
              push_paths << "/angular2/src/core/di/metadata.js"
              push_paths << "/angular2/src/core/di/decorators.js"
              push_paths << "/angular2/src/core/di/forward_ref.js"
              push_paths << "/angular2/src/core/di/injector.js"
              push_paths << "/angular2/src/core/di/provider.js"
              push_paths << "/angular2/src/core/di/key.js"
              push_paths << "/angular2/src/core/di/exceptions.js"
              push_paths << "/angular2/src/core/di/opaque_token.js"
              push_paths << "/angular2/src/core/util/decorators.js"
              push_paths << "/angular2/src/core/metadata/di.js"
              push_paths << "/angular2/src/core/metadata/directives.js"
              push_paths << "/angular2/src/core/metadata/view.js"
              push_paths << "/angular2/src/facade/async.js"
              push_paths << "/angular2/src/facade/exception_handler.js"
              push_paths << "/angular2/src/core/zone/ng_zone.js"
              push_paths << "/angular2/src/facade/collection.js"
              push_paths << "/angular2/src/core/linker/dynamic_component_loader.js"
              push_paths << "/angular2/src/core/linker/view_ref.js"
              push_paths << "/angular2/src/core/console.js"
              push_paths << "/angular2/src/core/profile/profile.js"
              push_paths << "/angular2/src/core/render/api.js"
              push_paths << "/angular2/src/core/linker/directive_resolver.js"
              push_paths << "/angular2/src/core/linker/view_resolver.js"
              push_paths << "/angular2/src/core/linker/compiler.js"
              push_paths << "/angular2/src/core/linker/view_manager.js"
              push_paths << "/angular2/src/core/linker/query_list.js"
              push_paths << "/angular2/src/core/linker/element_ref.js"
              push_paths << "/angular2/src/core/linker/template_ref.js"
              push_paths << "/angular2/src/core/linker/view_container_ref.js"
              push_paths << "/angular2/src/core/change_detection/change_detection.js"
              push_paths << "/angular2/src/core/linker/view.js"
              push_paths << "/angular2/src/core/linker/view_pool.js"
              push_paths << "/angular2/src/core/linker/view_manager_utils.js"
              push_paths << "/angular2/src/core/linker/view_listener.js"
              push_paths << "/angular2/src/core/linker/proto_view_factory.js"
              push_paths << "/angular2/src/core/linker/pipe_resolver.js"
              push_paths << "/angular2/src/core/reflection/reflector.js"
              push_paths << "/angular2/src/router/route_lifecycle_reflector.js"
              push_paths << "/angular2/src/router/route_config_impl.js"
              push_paths << "/angular2/src/router/route_recognizer.js"
              push_paths << "/angular2/src/router/component_recognizer.js"
              push_paths << "/angular2/src/router/route_config_nomalizer.js"
              push_paths << "/angular2/src/router/url_parser.js"
              push_paths << "/angular2/src/router/lifecycle_annotations_impl.js"
              push_paths << "/angular2/src/common/pipes.js"
              push_paths << "/angular2/src/common/directives.js"
              push_paths << "/angular2/src/common/forms.js"
              push_paths << "/angular2/src/common/common_directives.js"
              push_paths << "/angular2/src/platform/dom/events/hammer_common.js"
              push_paths << "/angular2/src/facade/math.js"
              push_paths << "/angular2/src/animate/css_animation_builder.js"
              push_paths << "/angular2/src/platform/dom/debug/by.js"
              push_paths << "/angular2/src/platform/dom/debug/debug_element_view_listener.js"
              push_paths << "/angular2/src/platform/browser/tools/common_tools.js"
              push_paths << "/angular2/src/core/render/view_factory.js"
              push_paths << "/angular2/src/core/render/view.js"
              push_paths << "/angular2/src/platform/dom/util.js"
              push_paths << "/angular2/src/compiler/runtime_compiler.js"
              push_paths << "/angular2/src/compiler/template_compiler.js"
              push_paths << "/angular2/src/compiler/directive_metadata.js"
              push_paths << "/angular2/src/compiler/source_module.js"
              push_paths << "/angular2/src/compiler/template_ast.js"
              push_paths << "/angular2/src/compiler/template_parser.js"
              push_paths << "/angular2/src/compiler/html_parser.js"
              push_paths << "/angular2/src/compiler/template_normalizer.js"
              push_paths << "/angular2/src/compiler/runtime_metadata.js"
              push_paths << "/angular2/src/compiler/change_detector_compiler.js"
              push_paths << "/angular2/src/compiler/style_compiler.js"
              push_paths << "/angular2/src/compiler/command_compiler.js"
              push_paths << "/angular2/src/compiler/schema/element_schema_registry.js"
              push_paths << "/angular2/src/compiler/schema/dom_element_schema_registry.js"
              push_paths << "/angular2/src/platform/browser/generic_browser_adapter.js"
              push_paths << "/angular2/src/core/di/type_literal.js"
              push_paths << "/angular2/src/core/profile/wtf_impl.js"
              push_paths << "/angular2/src/core/linker/template_commands.js"
              push_paths << "/angular2/src/core/change_detection/differs/iterable_differs.js"
              push_paths << "/angular2/src/core/change_detection/differs/default_iterable_differ.js"
              push_paths << "/angular2/src/core/change_detection/differs/keyvalue_differs.js"
              push_paths << "/angular2/src/core/change_detection/differs/default_keyvalue_differ.js"
              push_paths << "/angular2/src/core/change_detection/parser/ast.js"
              push_paths << "/angular2/src/core/change_detection/parser/lexer.js"
              push_paths << "/angular2/src/core/change_detection/parser/parser.js"
              push_paths << "/angular2/src/core/change_detection/parser/locals.js"
              push_paths << "/angular2/src/core/change_detection/exceptions.js"
              push_paths << "/angular2/src/core/change_detection/interfaces.js"
              push_paths << "/angular2/src/core/change_detection/constants.js"
              push_paths << "/angular2/src/core/change_detection/proto_change_detector.js"
              push_paths << "/angular2/src/core/change_detection/jit_proto_change_detector.js"
              push_paths << "/angular2/src/core/change_detection/binding_record.js"
              push_paths << "/angular2/src/core/change_detection/directive_record.js"
              push_paths << "/angular2/src/core/change_detection/dynamic_change_detector.js"
              push_paths << "/angular2/src/core/change_detection/change_detector_ref.js"
              push_paths << "/angular2/src/core/change_detection/change_detection_util.js"
              push_paths << "/angular2/src/core/render/util.js"
              push_paths << "/angular2/src/core/linker/element_injector.js"
              push_paths << "/angular2/src/core/pipes/pipes.js"
              push_paths << "/angular2/src/core/pipes/pipe_provider.js"
              push_paths << "/angular2/src/core/linker/element_binder.js"
              push_paths << "/angular2/src/router/path_recognizer.js"
              push_paths << "/angular2/src/router/async_route_handler.js"
              push_paths << "/angular2/src/router/sync_route_handler.js"
              push_paths << "/angular2/src/common/pipes/async_pipe.js"
              push_paths << "/angular2/src/common/pipes/uppercase_pipe.js"
              push_paths << "/angular2/src/common/pipes/lowercase_pipe.js"
              push_paths << "/angular2/src/common/pipes/json_pipe.js"
              push_paths << "/angular2/src/common/pipes/slice_pipe.js"
              push_paths << "/angular2/src/common/pipes/date_pipe.js"
              push_paths << "/angular2/src/common/pipes/number_pipe.js"
              push_paths << "/angular2/src/common/directives/ng_class.js"
              push_paths << "/angular2/src/common/directives/ng_for.js"
              push_paths << "/angular2/src/common/directives/ng_if.js"
              push_paths << "/angular2/src/common/directives/ng_style.js"
              push_paths << "/angular2/src/common/directives/ng_switch.js"
              push_paths << "/angular2/src/common/directives/observable_list_diff.js"
              push_paths << "/angular2/src/common/directives/core_directives.js"
              push_paths << "/angular2/src/common/forms/model.js"
              push_paths << "/angular2/src/common/forms/directives/abstract_control_directive.js"
              push_paths << "/angular2/src/common/forms/directives/control_container.js"
              push_paths << "/angular2/src/common/forms/directives/ng_control_name.js"
              push_paths << "/angular2/src/common/forms/directives/ng_form_control.js"
              push_paths << "/angular2/src/common/forms/directives/ng_model.js"
              push_paths << "/angular2/src/common/forms/directives/ng_control.js"
              push_paths << "/angular2/src/common/forms/directives/ng_control_group.js"
              push_paths << "/angular2/src/common/forms/directives/ng_form_model.js"
              push_paths << "/angular2/src/common/forms/directives/ng_form.js"
              push_paths << "/angular2/src/common/forms/directives/control_value_accessor.js"
              push_paths << "/angular2/src/common/forms/directives/default_value_accessor.js"
              push_paths << "/angular2/src/common/forms/directives/ng_control_status.js"
              push_paths << "/angular2/src/common/forms/directives/checkbox_value_accessor.js"
              push_paths << "/angular2/src/common/forms/directives/select_control_value_accessor.js"
              push_paths << "/angular2/src/common/forms/directives.js"
              push_paths << "/angular2/src/common/forms/validators.js"
              push_paths << "/angular2/src/common/forms/directives/validators.js"
              push_paths << "/angular2/src/common/forms/form_builder.js"
              push_paths << "/angular2/src/animate/css_animation_options.js"
              push_paths << "/angular2/src/animate/animation.js"
              push_paths << "/angular2/src/facade/browser.js"
              push_paths << "/angular2/src/compiler/util.js"
              push_paths << "/angular2/src/compiler/selector.js"
              push_paths << "/angular2/src/core/linker/interfaces.js"
              push_paths << "/angular2/src/compiler/html_tags.js"
              push_paths << "/angular2/src/compiler/parse_util.js"
              push_paths << "/angular2/src/compiler/template_preparser.js"
              push_paths << "/angular2/src/compiler/style_url_resolver.js"
              push_paths << "/angular2/src/compiler/html_ast.js"
              push_paths << "/angular2/src/compiler/html_lexer.js"
              push_paths << "/angular2/src/core/change_detection/change_detection_jit_generator.js"
              push_paths << "/angular2/src/compiler/change_definition_factory.js"
              push_paths << "/angular2/src/transform/template_compiler/change_detector_codegen.js"
              push_paths << "/angular2/src/core/linker/directive_lifecycle_reflector.js"
              push_paths << "/angular2/src/compiler/shadow_css.js"
              push_paths << "/angular2/src/core/change_detection/pipe_lifecycle_reflector.js"
              push_paths << "/angular2/src/core/change_detection/event_binding.js"
              push_paths << "/angular2/src/core/change_detection/coalesce.js"
              push_paths << "/angular2/src/core/change_detection/proto_record.js"
              push_paths << "/angular2/src/core/change_detection/abstract_change_detector.js"
              push_paths << "/angular2/src/core/change_detection/pipes.js"
              push_paths << "/angular2/src/core/linker/event_config.js"
              push_paths << "/angular2/src/common/pipes/invalid_pipe_argument_exception.js"
              push_paths << "/angular2/src/facade/intl.js"
              push_paths << "/angular2/src/common/forms/directives/shared.js"
              push_paths << "/angular2/src/common/forms/directives/number_value_accessor.js"
              push_paths << "/angular2/src/core/change_detection/codegen_name_util.js"
              push_paths << "/angular2/src/core/change_detection/codegen_logic_util.js"
              push_paths << "/angular2/src/core/change_detection/codegen_facade.js"
              push_paths << "/angular2/src/core/change_detection/observable_facade.js"
              push_paths << "/angular2/src/common/forms/directives/normalize_validator.js"
              push_paths << "/firebase/lib/firebase-web.js"
              push_paths << "/rxjs/subject/ReplaySubject.js"
              push_paths << "/rxjs/Subscription.js"
              push_paths << "/rxjs/Subject.js"
              push_paths << "/rxjs/observable/fromPromise.js"
              push_paths << "/rxjs/operator/toPromise.js"
              push_paths << "/rxjs/Observable.js"
              push_paths << "/rxjs/Subscription.js"
              push_paths << "/rxjs/scheduler/queue.js"
              push_paths << "/rxjs/util/root.js"
              push_paths << "/rxjs/Subscriber.js"
              push_paths << "/rxjs/util/SymbolShim.js"
              push_paths << "/rxjs/symbol/rxSubscriber.js"
              push_paths << "/rxjs/subject/SubjectSubscription.js"
              push_paths << "/rxjs/util/noop.js"
              push_paths << "/rxjs/scheduler/QueueScheduler.js"
              push_paths << "/rxjs/util/throwError.js"
              push_paths << "/rxjs/util/tryOrOnError.js"
              push_paths << "/rxjs/scheduler/QueueAction.js"
              push_paths << "/rxjs/scheduler/FutureAction.js"
              push_paths << "/app/services/Nav.js"
              push_paths << "/app/components/header.js"
              push_paths << "/app/components/sidenav.js"
              push_paths << "/app/components/toast.js"
              push_paths << "/app/components/Home.js"
              push_paths << "/app/components/About.js"
            end
            return [399, push_paths.empty? ? {} : {"link" => push_paths.map{|p| "<#{p}>; rel=preload"}.join("\n")}, []]
          end
        file.dir: dist
    access-log:
      format: '%h %l %u %t "%r" %s %b "%{Referer}i" "%{User-agent}i" "push:%{x-http2-push}o" "%{connect-time}x,%{request-total-time}x,%{request-header-time}x,%{request-body-time}x,%{process-time}x,%{response-time}x,%{duration}x"'
      path: logs/access.log
#http2-casper: ON
